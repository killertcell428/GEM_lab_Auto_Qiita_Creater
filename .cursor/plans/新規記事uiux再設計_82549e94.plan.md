---
name: 新規記事UIUX再設計
overview: PDCAに沿った1タブ縦スクロールUIへ再設計し、フィードバックとフェーズ進行をわかりやすくする
todos: []
---

# 新規記事UI/UX再設計プラン

## 目的

- PDCAワークフローを1タブ縦スクロールで素直に可視化し、ユーザーが「次に何をすべきか」「どこにフィードバックを書くか」を迷わない構成にする。
- フィードバックをフェーズにひも付けて表示・入力できるようにし、人が最小限の操作で半自動的にPDCAを回せるUIを作る。
- 投稿済み後は1週間後に分析フェーズが走る想定を明示し、結果を次回記事計画に活かす導線を示す。

## 変更方針

- 記事詳細ページを「単一タブ（ワンカラム）」で構成し、上から順に概要→各フェーズ（Plan/Do/Check/Act/Publish/Analyze）を縦に並べる。
- 各フェーズセクションには
- サマリー（進捗・ステータス・更新日時）
- 出力結果（要約/全文）
- フィードバック入力欄（そのフェーズに紐付く）
- 実行/再実行ボタン（該当フェーズ）
をまとめる。折りたたみ（アコーディオン）で詳細を開閉可能にする。
- Overview冒頭に「次のアクション」「現在ステータス」「投稿予定/投稿済み」「承認有無/期限」を整理したカードを配置。
- 投稿後の流れを明示：投稿済みなら「分析予定（投稿1週間後自動）」を表示し、分析結果はAnalyzeセクションで表示。
- フィードバック履歴はフェーズ別に絞り込み表示も可能にする（最初は単純にフェーズ名タグでグルーピング）。

## 実装ステップ

1) 記事詳細UI再構成

- ファイル: `web/app/articles/[id]/page.tsx`
- タブUIを廃止し、セクションを縦並びで表示（Overview/Plan/Do/Check/Act/Publish/Analyze/Feedbackまとめ）。
- Overviewカードに: ステータス、次のアクション、承認状態・期限、投稿済みURL/予定日を表示。
- 各フェーズセクションに: サマリー(状態/日時)、出力表示、フィードバック入力、フェーズ実行ボタンを配置。
- Publishセクション: 承認ボタン（pending時）、Qiita URL表示、承認期限カウントダウン。
- Analyzeセクション: 投稿から7日後に自動実行予定のメッセージ、結果表示（グラフ/要約）。
- フィードバック履歴: フェーズタグ付きで表示、フェーズ別フィルタを追加。

2) フィードバックAPI拡張（フェーズ紐付け）

- ファイル: `api/app/models/article.py`, `api/app/routers/feedback.py`, `web/lib/api.ts`
- フィードバックに `phase` フィールド（plan/do/check/act/publish/analyze/other）を追加し、保存・取得で扱う。
- フロントのフィードバック入力にフェーズ選択を追加し、履歴表示でタグ表示。

3) PDCA進行ガイドの表示

- ファイル: `web/app/articles/[id]/page.tsx`
- 各セクションのヘッダに「この後の推奨操作」を明記（例: Plan完了→Doを実行 / 投稿前→承認ボタン）。
- 投稿済みの場合は「分析実行予定」「次回Planに活かす」メッセージを表示。

4) 自動分析スケジュール表示

- ファイル: `web/app/articles/[id]/page.tsx`, `web/components/PerformanceChart.tsx`
- 投稿日がある場合、「投稿+7日で自動分析予定」を表示。分析結果が存在すればグラフ・要約を表示。

5) UX微調整

- 折りたたみ（アコーディオン）で長文を整理。
- ボタンラベルを「次にやること」を強調（例: 「次へ: Plan実行」「次へ: Do実行」「承認して投稿」）。
- 進行中表示/再実行ガード（既存のexecutingステートを流用）。

## 追加で考慮（必要に応じて）

- スケジュール実行後の分析自動キックは既存スケジューラにフック（必要なら別タスクで対応）。
- 大量フィードバック時のページ内フィルタ/検索は今後の拡張とする。