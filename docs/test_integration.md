# 統合テストガイド

## テスト環境のセットアップ

### 1. バックエンドAPIの起動

```bash
cd api
uvicorn app.main:app --reload --port 8000
```

### 2. フロントエンドの起動

```bash
cd web
npm run dev
```

## テストケース

### 1. ダッシュボードテスト

- [ ] ダッシュボードが正常に表示される
- [ ] 記事一覧が表示される（記事がある場合）
- [ ] 記事がない場合のメッセージが表示される
- [ ] 新規記事作成ボタンが機能する
- [ ] エラー時にエラーメッセージが表示される

### 2. 新規記事作成テスト

- [ ] テーマ入力なしで送信するとエラーが表示される
- [ ] テーマを入力して送信すると記事が作成される
- [ ] オプション設定が正しく保存される
- [ ] 作成後、記事詳細ページにリダイレクトされる

### 3. 記事詳細ページテスト

#### Articleタブ
- [ ] Markdownが正しく表示される
- [ ] 編集ボタンで編集モードに切り替わる
- [ ] 保存ボタンで記事が保存される
- [ ] 保存成功時に成功メッセージが表示される
- [ ] 保存失敗時にエラーメッセージが表示される

#### AI Processタブ
- [ ] 現在のPhaseが正しく表示される
- [ ] Phase実行ボタンが機能する
- [ ] 実行中はボタンが無効化される
- [ ] ストリーミング接続が確立される（接続インジケーター表示）
- [ ] Phase変更時にイベントが表示される

#### Feedbackタブ
- [ ] フィードバック入力フォームが表示される
- [ ] フィードバック内容なしで送信するとエラーが表示される
- [ ] フィードバック送信が成功する
- [ ] フィードバック履歴が表示される

#### Analysisタブ
- [ ] 分析結果がない場合のメッセージが表示される
- [ ] 分析実行ボタンが機能する
- [ ] 分析結果が表示される
- [ ] KPIサマリが表示される（ある場合）

### 4. エラーハンドリングテスト

- [ ] ネットワークエラー時に適切なメッセージが表示される
- [ ] APIサーバーが停止している場合のエラーメッセージ
- [ ] タイムアウト時のエラーメッセージ
- [ ] バリデーションエラーが正しく表示される
- [ ] 404エラー（記事が見つからない）が正しく表示される

### 5. UI/UXテスト

- [ ] ローディングスピナーが適切に表示される
- [ ] 成功メッセージが自動で消える（5秒後）
- [ ] エラーメッセージを閉じるボタンが機能する
- [ ] ダークモードが正しく動作する
- [ ] レスポンシブデザインが機能する

### 6. API統合テスト

#### 記事管理API
- [ ] `POST /api/articles` - 記事作成
- [ ] `GET /api/articles` - 記事一覧取得
- [ ] `GET /api/articles/{id}` - 記事詳細取得
- [ ] `PUT /api/articles/{id}` - 記事更新
- [ ] `DELETE /api/articles/{id}` - 記事削除
- [ ] `POST /api/articles/{id}/publish` - Qiita投稿

#### Phase実行API
- [ ] `POST /api/articles/{id}/plan` - Plan Phase実行
- [ ] `POST /api/articles/{id}/do` - Do Phase実行
- [ ] `POST /api/articles/{id}/check` - Check Phase実行
- [ ] `POST /api/articles/{id}/act` - Act Phase実行
- [ ] `POST /api/articles/{id}/pdca` - フルPDCAサイクル実行

#### Feedback API
- [ ] `POST /api/articles/{id}/feedback` - Feedback追加
- [ ] `GET /api/articles/{id}/feedback` - Feedback履歴取得
- [ ] `PUT /api/articles/{id}/feedback/{feedback_id}` - Feedback更新

#### ストリーミングAPI
- [ ] `GET /api/articles/{id}/stream` - SSEストリーミング

## パフォーマンステスト

- [ ] 記事一覧の読み込みが3秒以内
- [ ] 記事詳細の読み込みが2秒以内
- [ ] Phase実行のレスポンスが適切（非同期処理）

## セキュリティテスト

- [ ] CORS設定が正しく機能している
- [ ] 入力値のサニタイゼーション
- [ ] XSS対策（Markdown表示）

## ブラウザ互換性テスト

- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Edge

